


<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  </head>
  <body>
 <form id="myForm">
    Nama: <input type="text" id="nama" name="nama" /><br />
    <input type="submit" value="Submit" onclick="submitForm()" />
  </form>

  <script>
    function submitForm() {
    if (document.readyState === "complete") {
        // Menerima data dari formulir HTML
        var nama = document.getElementById('nama').value;

        // Ganti dengan token akses Anda yang valid
        var token = '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';

        // Ganti dengan path file yang benar di repositori Anda
        var file_path = 'Contoh.sql';

        // Koneksi ke GitHub API
        var username = 'Inchayiq12345';
        var repository = 'Barangmurah';
        var api_url = 'https://api.github.com/repos/' + username + '/' + repository + '/contents/' + file_path;

        // Ambil konten file yang ada di repositori
        fetch(api_url, {
                headers: {
                    'Authorization': 'token ' + token,
                    'User-Agent': 'JavaScript'
                }
            })
            .then(function(response) {
                if (!response.ok) {
                    throw new Error('Failed to fetch file from GitHub. HTTP code: ' + response.status);
                }
                return response.json();
            })
            .then(function(file_content) {
                // Dekode konten file
                var content = atob(file_content.content);

                // Tambahkan data baru ke dalam isi file
                var data_sql = "INSERT INTO `Contoh` (`User`) VALUES ('" + nama + "');";
                content += '\n' + data_sql;

                // Menyiapkan data untuk dikirim
                var data = {
                    message: 'Updating data from form',
                    content: btoa(content),
                    sha: file_content.sha,
                    branch: 'main'
                };

                // Kirim data yang diperbarui kembali ke GitHub
                return fetch(api_url, {
                    method: 'PUT',
                    headers: {
                        'Authorization': 'token ' + token,
                        'User-Agent': 'JavaScript',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
            })
            .then(function(response) {
                if (!response.ok) {
                    throw new Error('Failed to update data. HTTP code: ' + response.status);
                }
                alert('Data updated successfully!');
            })
            .catch(function(error) {
                console.error('An error occurred:', error);
                alert('Failed to update data: ' + error.message);
            });
    } else {
        alert('The document is not fully loaded yet.');
    }
    }
  </script>


    
    <div class="kotak-bawah">
      <a href="chat://open">
        <button class="red-button" type="button"> </button>
      </a>
      <a href="provil://open">
        <button class="blue-button" type="button">provil</button>
      </a>
    </div>
  </body>
</html>
